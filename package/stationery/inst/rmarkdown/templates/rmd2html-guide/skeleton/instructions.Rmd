---
title: "Instructions for Rmd authors of Guide Documents"
subtitle: "Using HTML Output for Guides"
author:
 - name: Paul Johnson
   affiliation: CRMDA
   email: pauljohn@ku.edu
advertise: >
   Please  visit [http://crmda.ku.edu/guides](http://crmda.ku.edu/guides) 
keywords: guide, Rmarkdown
abstract: >
    Author, please REMEMBER TO INCLUDE AN ABSTRACT BEFORE FINALIZING THIS DOCUMENT!
checked_by: "First Last"
Note to Authors: please_dont_change_the_next 4 lines!
date: "`r format(Sys.time(), '%b. %e %Y')`"
output:
  stationery::crmda_html_document:
     toc: true
     toc_depth: 2
     highlight: haddock
     theme: default
     css: theme/kutils.css
     template: theme/guide-boilerplate.html
  prettydoc::html_pretty: 
    theme: cayman 
logoleft: theme/logoleft.png
logoright: theme/logo-vert.png
guide_number: 00
header-includes: 
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
##This Invisible Chunk is required in all CRMDA documents
outdir <- paste0("tmpout")
if (!file.exists(outdir)) dir.create(outdir, recursive = TRUE)
knitr::opts_chunk$set(echo=TRUE, comment=NA, fig.path=paste0(outdir, "/p-"))
options(width = 70)
```



# About this framework

For guides, we use a customized template and style sheet. 

Unfortunately, this creates HUGE HTML files. The files are HUGE
because they include the bootstrap theme files provided by rmarkdown.
We have benefitted from some of these special features, but the HUGE
file is the price we pay. 

By either setting "theme: null" in the document yaml header, or by
changing to a different document processing function, the large
file size can be avoided.  This document has yaml example for
a couple of document output formats. 

```
output:
  stationery::crmda_html_document:
    css: theme/kutils.css
    template: theme/guide-boilerplate.html
```

# Try with the skeleton, it has the full header

See the `stationery` vignette in the `stationery` package.  That
explains the big picture. 

In the theme folder provided with this document, there is a
copy of the boilerplate file that determines the appearance of the
output. 

## To create a new document. 

In R, run

```
initWriteup("rmd2html-guide")
```

That will create a directory "rmd2html-guide" in which the 
skeleton file will be found.

## To compile

There are 2 options. Either use the R function

```
stationery::rmd2html("skeleton.Rmd")
```

or the shell script that is provided with the `skeleton.Rmd` file:

```
$ ./rmd2html.sh skeleton.Rmd
```

The Rstudio pull-down menu knit should work as well.

```
stationery::rmd2html("skeleton.Rmd", toc = TRUE, toc_depth = 1, keep_md = TRUE)
```

The command line script allows the same arguments, however THERE MUST
NOT BE SPACES betwen the option name, the equal sign, and the value of 
the option:

```
$ ./rmd2html.sh --toc=TRUE --toc_depth=1 --keep_md=TRUE skeleton.Rmd
```

A full list of arguments is provided in `?rmd2html`.

# Top Level Heading

## Second Level Heading

#### Colored callout is a level 4 heading with markup {.bs-callout .bs-callout-gray}
This is a gray callout. Could be "red", "orange" "blue", "green"
instead of gray. For more on this, there is the vignette "HTML_special_features".

#### Policies about writing in these documents. {.bs-callout .bs-callout-red}
This demonstrates a red callout

## Tabbed sub-sections {.tabset .tabset-fade}

Declare a level 2 heading with `{.tabset .tabset-fade}` and then the
level 3 headers after that are treated as tabs.

One thing on my TODO list is is to make the tab markers more vivid. I
suspect some readers do not realize these are clickable tabs because
they are somewhat subtle.

### <span style="color:red">First Tab Here</span>

Info within first tab. You must click "Second Tab Here" to see the
second tab.

### <span style="color:orange">Second Tab Here</span>

Now you see contents of second tab. I could, literally, write a book
in here. Could be code chunks, pictures, my favorite Bible verses.

### Third Tab Here

This is the content inside the third tab 

## Equations: another section after the tabs are finished

Markdown accepts much LaTeX code. Especially well supported are
equations, either "inline", such as $y_i = \beta_0 + \beta_1 x1_i +
\varepsilon_i$, or "display" mode.

Because HTML output lacks some features we are accustomed to in \LaTeX
documents, the "usual rules" are not entirely correct. Nevertheless,
we ask authors to limit themselves to two styles of display equations.
Either use the demarcators `\[` and `\]` to declare a display equation:

\[
y_i = \beta_0 + \beta_1 x1_i + \varepsilon_i \label{eq:lin10}
\]

Or replace those demarcators with `\begin{equation}` and
`\end{equation}`. Even if the Rmd to HTML translation will tolerate
`$$` and `$$` to frame a displayed equation, don't use them.

Equation numbering does not work as usual in HTML output, that's
a problem discussed in "HTML_special_features".


## Chunks

R code chunks are demarcated by three back-ticks and appear in-text
with a shaded box (because we are using the listings-style output).

```{r myFirstPlot, dev=c('png'), out.width="500px", fig.width=3}
x <- rnorm(500)
hist(x)
```

There are many more examples of code chunks in the vignette "code_chunks". 

#### R code inside a colored callout {.bs-callout .bs-callout-red}
```{r xsummary}
mean(x)
```



[//]: (All guides must have this as the final stanza)

## R Session Info
```{r sessionInfo, echo = FALSE}
sessionInfo()
```

```{r warnings, echo = FALSE}
if(!is.null(warnings())){
    print("Warnings:")
    warnings()
}
```

Available under
[Created Commons license 3.0 <img src="http://crmda.dept.ku.edu/images/cc-3.0.png" alt="CC BY"
style="width: 75px;height: 20px;"/>](http://creativecommons.org/licenses/by/3.0/)

